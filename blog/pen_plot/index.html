<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=logo.png rel=icon type=image/png> <script> MathJax = {
			tex: {
				inlineMath: [['$', '$'], ['\\(', '\\)']],
				processEscapes: true
			},
			svg: {
				fontCache: 'global'
			}
		}; </script> <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?version=4.8.0&features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js async id=MathJax-script></script> <script src=https://kit.fontawesome.com/d1e7542e7f.js crossorigin=anonymous></script> <link href=client/main.677622768.css rel=stylesheet><link href=client/[slug].d2f2c26c.css rel=stylesheet><link href=client/client.4da8ec3a.css rel=stylesheet> <noscript id=sapper-head-start></noscript><title>Pen Plotting</title><noscript id=sapper-head-end></noscript> </head> <body> <div id=sapper> <nav class=svelte-wyfi55><ul class=svelte-wyfi55><li class=svelte-wyfi55><a href=blog rel=prefetch aria-current=page class="svelte-wyfi55 btn-gen">Blog</a></li> <li class=svelte-wyfi55><a href=. class="svelte-wyfi55 btn-gen">Home</a></li> </ul></nav> <main class=svelte-1xjjggr> <div class="content svelte-1d9fknd"><h1>Pen Plotting</h1> <hr> <p>Pen plotting is an artform that allows people to use machines to do the physical drawing actions. Typically, pen plotted art is very methodical and full of very percise patterns. The most common kind of pen plotting machine is the XY pen plotter, which draws onto a piece of paper with some kind of pen/marker/brush. Gcode instructions are used to guide the plotter to the proper positions on the paper. 3D extruder-based printers also operate in a similar way but in an additional (Z) dimension. Could you convert one to a XY pen plotter? </p> <p>This isn't a new question. There have been multiple posts <a href=https://urish.medium.com/how-to-turn-your-3d-printer-into-a-plotter-in-one-hour-d6fe14559f1a rel=nofollow target=_blank>[1]</a> <a href=https://github.com/johnathantran/Pen-Plotter rel=nofollow target=_blank>[2]</a> and projects that took popular 3D printers and converted them into XY pen plotters. The general idea is to construct some kind of mechanism that holds the pen and figure out a pipeline to convert an image into gcode.</p> <p>For the former, I constructed a simple PLA holder <a href="https://drive.google.com/file/d/12XBc1dm8MU3V2Ip31h1jqYUUveD-SpJA/view?usp=sharing" rel=nofollow target=_blank>[download link]</a> that replaced the existing filament head for the Ender 3 Pro. It was also constructed in a way that it could use all the existing screws that held the extruder head in place, which removed the need to buy additional screws. Two of the screws were also used to fasten the pen to the holder. </p> <div style=max-width:650px;margin-right:auto;margin-left:auto> <img alt="Screenshot of simple PLA holder" src=post-res/pen_plot/holder_example.png style=max-width:300px> </div> <p>Creating the gcode was pretty straight forward. Typically, digital art is created with bitmaps (i.e. canvas's width and height is defined by pixels), but to translate an image to a series of physical movements, we need a canvas defined by real-world units (cm, inches, etc.). To accomplish that, the image needs to be defined as a series of vectors, and the easiest representation is SVG. From the converted SVG artwork, we can use <a href=https://sameer.github.io/svg2gcode/ rel=nofollow target=_blank>existing tools</a> to get our gcode.</p> <p>The artwork I wanted to pen plot was a giant New Jersey transit ticket. I went to New Jersey for vacation and got the chance to ride the different lightrails, and the trip was so fun that I wanted to memorialize it through this ticket. The ticket was recreated in Inkscape and was broken into three different layers - the background (pink dots), black text, and blue text.</p> <div style=max-width:650px;margin-right:auto;margin-left:auto> <img alt="Giant NJ Transit ticket" src=post-res/pen_plot/artwork.png style=max-width:300px;display:inline> <img alt="Giant NJ Transit ticket in Inkscape" src=post-res/pen_plot/artwork_svg.png style=max-width:300px;display:inline> </div> <p>I performed a calibration sequence for each layer during the printing process:</p> <ol> <li>Set head position to home and manually lift the Z-bar such that the pen is off the plate </li> <li>Replace the main canvas paper with another piece of paper (preferably a cheaper paper)</li> <li>Removing the existing pen from the holder</li> <li>Insert the new pen with minimal pressure from the screw</li> <li>Set the position to home and readjust the pen's position in the holder until it is making contact with the plate with standard pressure of a person holding a pen to a piece of paper</li> <li>Tighten pen to holder until the pen does not move to any horizontal motion </li> <li>Run current layer gcode on new piece of paper and ensure that the output is drawn correctly</li> <li>If this run is successful, replace the cheaper paper with the canvas paper and execute the real drawing</li> </ol> <div style=max-width:300px;margin-right:auto;margin-left:auto> <video autoplay loop muted style=max-width:300px> <source src=post-res/pen_plot/pen_plot_video.mp4 type=video/mp4> Your browser does not support the video tag. </video> </div> <p>Some important notes about this system:</p> <ul> <li>A major shortcoming is how the holder affixes the pen with two points of contact. This causes some pens or markers to be tilted at an angle when pushed to the PLA </li> <li>Likewise, this holder also doesn't support pens that <strong>should</strong> be at an angle (think fountain pens)</li> <li>Two screws also makes the adjustment process longer and more tedious</li> <li>The calibration process worked well, but one thing not mentioned was the initial calibration of the plate to the first pen. This was a very tedious process on the Ender 3 Pro because of its manual adjustment wheels. Follow the standard calibration procedure for PLA printing to get the plate in proper position</li> <li>Calibration process could use some improvements in terms of making sure that the pen pressure was consistent across all points on the plate</li> <li>There are limitations to the svg2gcode tool - mainly that it only supports certain types of vector paths. It also doesn't support infill options, so I had to fill in things like "1" and the arrows on the giant ticket by hand</li> <li>The original gcode output from svg2gcode did not elevate the pen before going to the next gcode instruction. This could cause the pen to drag along the paper during the transition points. I wrote a small Python script to add an elevation command before every <code>G0</code> or <code>M2</code> command:</li> </ul> <pre class=language-python><code class=language-python>import os
import sys

if __name__ == '__main__':
    in_gcode_file = "INPUT_GCODE_NAME.gcode"
    out_gcode_file =  "OUTPUT_GCODE_NAME.gcode"
    safety_height = 3 #mm

    with open(in_gcode_file, "r") as f:
        contents = list(map(str.strip, f.readlines()))
    
    with open(out_gcode_file, "w") as f:
        for con in contents:
            if "G0" in con:
                f.write("G0 Z%i\n%s\nG0 Z%i\n"%(safety_height, con, 0))
            else:
                if "M2" in con:
                    f.write("G0 Z10\nG0 X0 Y0 Z10\nG0 Z0\n%s\n"%(con))
                else:
                    f.write("%s\n"%(con))</code></pre></div></main></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a){return {post:{title:"Pen Plotting",description:"Description goes here",slug:"pen_plot",html:"\u003Cp\u003EPen plotting is an artform that allows people to use machines to do the physical drawing actions. Typically, pen plotted art is very methodical and full of very percise patterns. The most common kind of pen plotting machine is the XY pen plotter, which draws onto a piece of paper with some kind of pen\u002Fmarker\u002Fbrush. Gcode instructions are used to guide the plotter to the proper positions on the paper. 3D extruder-based printers also operate in a similar way but in an additional (Z) dimension. Could you convert one to a XY pen plotter? \u003C\u002Fp\u003E\n\u003Cp\u003EThis isn&#39;t a new question. There have been multiple posts \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Furish.medium.com\u002Fhow-to-turn-your-3d-printer-into-a-plotter-in-one-hour-d6fe14559f1a\"\u003E[1]\u003C\u002Fa\u003E \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fgithub.com\u002Fjohnathantran\u002FPen-Plotter\"\u003E[2]\u003C\u002Fa\u003E and projects that took popular 3D printers and converted them into XY pen plotters. The general idea is to construct some kind of mechanism that holds the pen and figure out a pipeline to convert an image into gcode.\u003C\u002Fp\u003E\n\u003Cp\u003EFor the former, I constructed a simple PLA holder \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fdrive.google.com\u002Ffile\u002Fd\u002F12XBc1dm8MU3V2Ip31h1jqYUUveD-SpJA\u002Fview?usp=sharing\"\u003E[download link]\u003C\u002Fa\u003E that replaced the existing filament head for the Ender 3 Pro. It was also constructed in a way that it could use all the existing screws that held the extruder head in place, which removed the need to buy additional screws. Two of the screws were also used to fasten the pen to the holder. \u003C\u002Fp\u003E\n\u003Cdiv style=\"max-width: 650px; margin-right:auto; margin-left:auto\"\u003E\n    \u003Cimg style=\"max-width: 300px;\" src=\"post-res\u002Fpen_plot\u002Fholder_example.png\" alt=\"Screenshot of simple PLA holder\"\u002F\u003E\n\u003C\u002Fdiv\u003E\n\n\n\u003Cp\u003ECreating the gcode was pretty straight forward. Typically, digital art is created with bitmaps (i.e. canvas&#39;s width and height is defined by pixels), but to translate an image to a series of physical movements, we need a canvas defined by real-world units (cm, inches, etc.). To accomplish that, the image needs to be defined as a series of vectors, and the easiest representation is SVG. From the converted SVG artwork, we can use \u003Ca target=\"_blank\" rel=\"nofollow\" href=\"https:\u002F\u002Fsameer.github.io\u002Fsvg2gcode\u002F\"\u003Eexisting tools\u003C\u002Fa\u003E to get our gcode.\u003C\u002Fp\u003E\n\u003Cp\u003EThe artwork I wanted to pen plot was a giant New Jersey transit ticket. I went to New Jersey for vacation and got the chance to ride the different lightrails, and the trip was so fun that I wanted to memorialize it through this ticket. The ticket was recreated in Inkscape and was broken into three different layers - the background (pink dots), black text, and blue text.\u003C\u002Fp\u003E\n\u003Cdiv style=\"max-width: 650px; margin-right:auto; margin-left:auto\"\u003E\n    \u003Cimg style=\"max-width: 300px; display: inline;\" src=\"post-res\u002Fpen_plot\u002Fartwork.png\" alt=\"Giant NJ Transit ticket\"\u002F\u003E\n    \u003Cimg style=\"max-width: 300px; display: inline;\" src=\"post-res\u002Fpen_plot\u002Fartwork_svg.png\" alt=\"Giant NJ Transit ticket in Inkscape\"\u002F\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cp\u003EI performed a calibration sequence for each layer during the printing process:\u003C\u002Fp\u003E\n\u003Col\u003E\n\u003Cli\u003ESet head position to home and manually lift the Z-bar such that the pen is off the plate \u003C\u002Fli\u003E\n\u003Cli\u003EReplace the main canvas paper with another piece of paper (preferably a cheaper paper)\u003C\u002Fli\u003E\n\u003Cli\u003ERemoving the existing pen from the holder\u003C\u002Fli\u003E\n\u003Cli\u003EInsert the new pen with minimal pressure from the screw\u003C\u002Fli\u003E\n\u003Cli\u003ESet the position to home and readjust the pen&#39;s position in the holder until it is making contact with the plate with standard pressure of a person holding a pen to a piece of paper\u003C\u002Fli\u003E\n\u003Cli\u003ETighten pen to holder until the pen does not move to any horizontal motion \u003C\u002Fli\u003E\n\u003Cli\u003ERun current layer gcode on new piece of paper and ensure that the output is drawn correctly\u003C\u002Fli\u003E\n\u003Cli\u003EIf this run is successful, replace the cheaper paper with the canvas paper and execute the real drawing\u003C\u002Fli\u003E\n\u003C\u002Fol\u003E\n\u003Cdiv style=\"max-width: 300px; margin-right:auto; margin-left:auto\"\u003E\n\u003Cvideo autoplay muted loop style=\"max-width: 300px;\"\u003E\n  \u003Csource src=\"post-res\u002Fpen_plot\u002Fpen_plot_video.mp4\" type=\"video\u002Fmp4\"\u003E\n  Your browser does not support the video tag.\n\u003C\u002Fvideo\u003E\n\u003C\u002Fdiv\u003E\n\n\u003Cp\u003ESome important notes about this system:\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EA major shortcoming is how the holder affixes the pen with two points of contact. This causes some pens or markers to be tilted at an angle when pushed to the PLA \u003C\u002Fli\u003E\n\u003Cli\u003ELikewise, this holder also doesn&#39;t support pens that \u003Cstrong\u003Eshould\u003C\u002Fstrong\u003E be at an angle (think fountain pens)\u003C\u002Fli\u003E\n\u003Cli\u003ETwo screws also makes the adjustment process longer and more tedious\u003C\u002Fli\u003E\n\u003Cli\u003EThe calibration process worked well, but one thing not mentioned was the initial calibration of the plate to the first pen. This was a very tedious process on the Ender 3 Pro because of its manual adjustment wheels. Follow the standard calibration procedure for PLA printing to get the plate in proper position\u003C\u002Fli\u003E\n\u003Cli\u003ECalibration process could use some improvements in terms of making sure that the pen pressure was consistent across all points on the plate\u003C\u002Fli\u003E\n\u003Cli\u003EThere are limitations to the svg2gcode tool - mainly that it only supports certain types of vector paths. It also doesn&#39;t support infill options, so I had to fill in things like &quot;1&quot; and the arrows on the giant ticket by hand\u003C\u002Fli\u003E\n\u003Cli\u003EThe original gcode output from svg2gcode did not elevate the pen before going to the next gcode instruction. This could cause the pen to drag along the paper during the transition points. I wrote a small Python script to add an elevation command before every \u003Ccode\u003EG0\u003C\u002Fcode\u003E or \u003Ccode\u003EM2\u003C\u002Fcode\u003E command:\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"language-python\"\u003E\u003Ccode class=\"language-python\"\u003Eimport os\nimport sys\n\nif __name__ == '__main__':\n    in_gcode_file = \"INPUT_GCODE_NAME.gcode\"\n    out_gcode_file =  \"OUTPUT_GCODE_NAME.gcode\"\n    safety_height = 3 #mm\n\n    with open(in_gcode_file, \"r\") as f:\n        contents = list(map(str.strip, f.readlines()))\n    \n    with open(out_gcode_file, \"w\") as f:\n        for con in contents:\n            if \"G0\" in con:\n                f.write(\"G0 Z%i\\n%s\\nG0 Z%i\\n\"%(safety_height, con, 0))\n            else:\n                if \"M2\" in con:\n                    f.write(\"G0 Z10\\nG0 X0 Y0 Z10\\nG0 Z0\\n%s\\n\"%(con))\n                else:\n                    f.write(\"%s\\n\"%(con))\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E",created:"Sun, 30 Jun 2024 19:45:28 GMT",excerpt:"Pen plotting is an artform that allows people to use machines to do the physical drawing actions. Typically, pen plotted art is very methodical and full of very percise patterns. The most common kind of pen plotting machine is the XY pen plotter, which draws onto a piece of paper with some kind of pen\u002Fmarker\u002Fbrush. Gcode instructions are used to guide the plotter to the proper positions on the paper. 3D extruder-based printers also operate in a similar way but in an additional (Z) dimension. Could you convert one to a XY pen plotter? \n",author:a,readingTime:"5 min read",mediaFilePath:"post-res\u002Fpen_plot\u002Fpen_plot_thumb.png",tags:["art","other"],art_credit:a}}}("Vijay Rajagopal"))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.4da8ec3a.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.4da8ec3a.js")}document.head.appendChild(s)</script> 